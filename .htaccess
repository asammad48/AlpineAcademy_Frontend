# ========================================
# Front Controller Pattern for Webempresa
# All requests route through router.php
# ========================================

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # ========================================
    # 1. STATIC FILES - Serve directly
    # ========================================
    # Allow actual files (CSS, JS, images, etc.) to load normally
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # ========================================
    # 2. DIRECTORIES - Serve directly
    # ========================================
    # Allow actual directories to be accessed normally
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # ========================================
    # 3. FRONT CONTROLLER - Route everything else through router.php
    # ========================================
    # All other requests go to router.php which handles:
    # - Clean URLs (removing .html extension)
    # - Language-specific routing
    # - Blog directory handling
    # - Cross-language word variations
    RewriteRule ^(.*)$ router.php [L]

</IfModule>

# ========================================
# Security Headers
# ========================================
<IfModule mod_headers.c>
    # Prevent caching for HTML pages (important for updates)
    <FilesMatch "\.(html|php)$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>
</IfModule>
